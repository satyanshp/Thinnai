"use strict";(self.webpackChunkscaffold=self.webpackChunkscaffold||[]).push([[2338],{3273:function(e,t,i){i.d(t,{A:function(){return s},i:function(){return a}});var r=i(74165),n=i(15861),a=function(e){return function(){var t=(0,n.Z)((0,r.Z)().mark((function t(i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i({type:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},s=function(e){return function(){var t=(0,n.Z)((0,r.Z)().mark((function t(i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i({type:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},82338:function(e,t,i){i.d(t,{Z:function(){return V}});var r=i(1413),n=i(29439),a=i(68870),s=i(24518),l=i(61889),o=i(5022),c=i(35527),d=i(66934),u=i(48550),m=i(20890),h=i(68949),x=i(36571),p=i(48429),f=i(92506),g=i(72791),Z=i(16030),j=i(57689),b=i(62797),v=i(2716),N=i(3273),y=i(95848),w=i(12169),F=(i(76464),i(32913)),P=i(52739),k=i(17133),S=i(74558),I=i(74165),C=i(15861),R=Math.PI/180;function E(e,t,i){return D.apply(this,arguments)}function D(){return D=(0,C.Z)((0,I.Z)().mark((function e(t,i,r){var n,a,s,l,o,c,d,u,m,h,x,p=arguments;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>3&&void 0!==p[3]?p[3]:1,a=p.length>4&&void 0!==p[4]?p[4]:0,s=i.getContext("2d")){e.next=5;break}throw new Error("No 2d context");case 5:l=t.naturalWidth/t.width,o=t.naturalHeight/t.height,c=window.devicePixelRatio,i.width=Math.floor(r.width*l*c),i.height=Math.floor(r.height*o*c),s.scale(c,c),s.imageSmoothingQuality="high",d=r.x*l,u=r.y*o,m=a*R,h=t.naturalWidth/2,x=t.naturalHeight/2,s.save(),s.translate(-d,-u),s.translate(h,x),s.rotate(m),s.scale(n,n),s.translate(-h,-x),s.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,t.naturalWidth,t.naturalHeight),s.restore();case 25:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var A="";function B(e){return new Promise((function(t){e.toBlob(t)}))}function q(e,t){return L.apply(this,arguments)}function L(){return L=(0,C.Z)((0,I.Z)().mark((function e(t,i){var r,n,a,s,l=arguments;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:1,n=l.length>3&&void 0!==l[3]?l[3]:0,a=document.createElement("canvas"),E(t,a,i,r,n),e.next=6,B(a);case 6:if(s=e.sent){e.next=10;break}return console.error("Failed to create blob"),e.abrupt("return",{imageFile:null,previewUrl:""});case 10:return A&&URL.revokeObjectURL(A),A=URL.createObjectURL(s),e.abrupt("return",{imageFile:s,previewUrl:A});case 13:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}var O=i(85827),z=i.n(O),T=i(98234),_=i.n(T),U=(i(89390),i(80184)),W=function(e){var t,i,r,l=e.imgSrc,o=e.handleCrop,c=e.aspectRatio,d=e.closePreview,u=(0,g.useRef)(null),m=(0,g.useState)(),h=(0,n.Z)(m,2),x=h[0],p=h[1],f=(0,g.useState)(1),Z=(0,n.Z)(f,2),j=Z[0],b=Z[1],v=(0,g.useState)(0),N=(0,n.Z)(v,2),y=N[0],w=N[1],F=(0,g.useState)(),P=(0,n.Z)(F,2),k=P[0],S=P[1],R=(0,g.useState)(),E=(0,n.Z)(R,2),D=E[0],A=E[1];t=(0,C.Z)((0,I.Z)().mark((function e(){var t,i,r;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!==x&&void 0!==x&&x.width&&null!==x&&void 0!==x&&x.height&&u.current)){e.next=8;break}return e.next=3,q(u.current,x,j,y);case 3:t=e.sent,i=t.imageFile,r=t.previewUrl,i&&S(i),r&&A(r);case 8:case"end":return e.stop()}}),e)}))),i=100,r=[x,j,y],(0,g.useEffect)((function(){var e=setTimeout((function(){t.apply(void 0,r)}),i);return function(){clearTimeout(e)}}),r);return(0,U.jsxs)(a.Z,{textAlign:"end",children:[(0,U.jsx)(a.Z,{display:"block",children:l&&(0,U.jsx)(_(),{crop:x,onChange:function(e,t){return p(e)},aspect:c,children:(0,U.jsx)("img",{ref:u,alt:"Crop me",src:l,style:{transform:"scale(".concat(j,") rotate(").concat(y,"deg)"),maxHeight:"80vh"}})})}),(0,U.jsxs)(s.Z,{variant:"contained",color:"primary",onClick:function(){d(),p(void 0),b(1),w(0)},sx:{background:"#1A191E"},children:[" ","CANCEL"," "]}),(0,U.jsxs)(s.Z,{variant:"contained",color:"primary",onClick:function(){k?new(z())(k,{quality:.7,success:function(){var e=(0,C.Z)((0,I.Z)().mark((function e(t){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t,D);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):o(null,null)},sx:{marginLeft:"1rem",background:"#1A191E"},children:[" ","DONE"," "]})]})},H=function(e){var t=e.height,i=e.width,r=e.widthPhone,a=void 0===r?"150px":r,s=e.heightPhone,l=void 0===s?"150px":s,o=e.name,c=e.borderRadius,d=e.required,u=e.background,m=void 0===u?"#EEEEEE":u,h=e.border,x=void 0===h?"2px dashed #B8B6B6":h,p=e.iconcolor,f=void 0===p?"#B8B6B6":p,j=e.contWidth,b=e.aspectRatio,v=e.initialImage,N=e.setCroppedImageFile,w=e.multiple,I=void 0!==w&&w,C=(0,Z.I0)(),R=(0,g.useRef)(null),E=(0,g.useState)(null),D=(0,n.Z)(E,2),A=D[0],B=D[1],q=(0,g.useState)(""),L=(0,n.Z)(q,2),O=L[0],z=L[1],T=(0,g.useState)(),_=(0,n.Z)(T,2),H=_[0],M=_[1],V=(0,g.useState)(!1),Y=(0,n.Z)(V,2),G=Y[0],J=Y[1];return(0,g.useEffect)((function(){v&&z(v)}),[v]),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(P.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:G,children:(0,U.jsx)(W,{aspectRatio:b,imgSrc:A,handleCrop:function(e,t){N&&e?(N(e),M(t),J(!1)):C((0,S.b)("Please crop image to required aspect Ratio",y.Xo.INFO))},closePreview:function(){N(),M(""),J(!1),B(null),R&&R.current&&(R.current.value="")}})}),(0,U.jsx)("section",{style:{width:j},children:(0,U.jsxs)(k.Z,{className:"input-file",sx:{display:"flex",flexDirection:"column",justifyContent:"center",height:t,width:i,"@media (max-width: 600px)":{width:a,height:l},alignItems:"center",border:x,cursor:"pointer",fontSize:"large",backgroundColor:m,overflow:"hidden",position:"relative",borderRadius:c},children:[!H&&!O&&(0,U.jsx)(F.Z,{style:{color:f,height:"38.25px",width:"37.55px",zIndex:"1"}}),H&&(0,U.jsxs)("div",{style:{position:"absolute"},children:[(0,U.jsx)("div",{className:"overlay"}),(0,U.jsx)("img",{style:{height:t,objectFit:"contain"},src:H,alt:"cropped image"})]}),O&&!H&&(0,U.jsxs)("div",{style:{position:"absolute"},children:[(0,U.jsx)("div",{className:"overlay"}),(0,U.jsx)("img",{style:{height:t,objectFit:"contain"},src:"".concat(y.T2).concat(O),alt:""})]}),(0,U.jsx)("input",{style:{display:"none"},ref:R,type:"file",name:o,multiple:I,accept:"image/png, image/jpeg, image/webp, image/svg",onChange:function(e){if(e.target.files&&e.target.files.length>0){console.log(e.target.files[0]);var t=new FileReader;t.addEventListener("load",(function(){var e;return B((null===(e=t.result)||void 0===e?void 0:e.toString())||"")})),t.readAsDataURL(e.target.files[0]),J(!0)}}})]})}),d&&!O?(0,U.jsx)("span",{className:"error-msg",children:"*Required"}):null]})},M=(0,d.ZP)(c.Z)((function(e){e.theme;return{fontSize:"1rem",height:"43px",width:"auto",border:"0.5px solid #000000",padding:"0.25rem 0.5rem",borderRadius:"6px",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"none",color:"#383838",fontFamily:"Open Sans",fontStyle:"normal",fontWeight:"400",textAlign:"center",lineHeight:"16px",cursor:"pointer",gap:"0.422rem"}})),V=function(e){var t=e.currentUserData,i=e.bookingId,c=e.isRegistrationForBooking,d=void 0!==c&&c,F=e.onCompleteNavigateFromBooking,P=e.isMyBooking,k=void 0!==P&&P,S=(0,Z.v9)((function(e){return e.profile.loading})),I=(0,g.useState)(new Date(9151488e5)),C=(0,n.Z)(I,2),R=C[0],E=C[1],D=(0,g.useState)(),A=(0,n.Z)(D,2),B=A[0],q=A[1],L=(0,g.useState)(!1),O=(0,n.Z)(L,2),z=O[0],T=O[1],_=(0,g.useState)(),W=(0,n.Z)(_,2),V=W[0],Y=W[1],G=(0,g.useState)(!1),J=(0,n.Z)(G,2),X=J[0],Q=J[1],K=(0,g.useState)(),$=(0,n.Z)(K,2),ee=$[0],te=$[1],ie=(0,g.useState)(),re=(0,n.Z)(ie,2),ne=re[0],ae=re[1],se=(0,g.useState)(),le=(0,n.Z)(se,2),oe=le[0],ce=le[1],de=(0,g.useState)({firstName:"",lastName:"",email:"",gender:"",profession:"",dateOfBirth:R,idProofType:"Aadhar",idProofNumber:"",idProofFront:"",idProofBack:"",profileImage:"",loading:!1}),ue=(0,n.Z)(de,2),me=ue[0],he=ue[1],xe=(0,j.s0)(),pe=(0,Z.I0)();return(0,g.useEffect)((function(){if(t&&t.registered){he(t),Q(!1);var e=y.mb.findIndex((function(e){return e.text===t.gender}));-1!==e&&(Y(t.gender),T(!0),q(e))}else Q(!0)}),[t]),(0,U.jsx)(f.J9,{initialValues:me,enableReinitialize:!0,validationSchema:(0,b.Ry)({firstName:(0,b.Z_)().required("Required"),lastName:(0,b.Z_)().required("Required"),email:(0,b.Z_)().required("Required").email("Enter Valid Email"),profession:(0,b.Z_)().required("Required")}),onSubmit:function(e,t){he((0,r.Z)((0,r.Z)({},e),{},{gender:V,dateOfBirth:R,loading:!0}));var n={firstName:e.firstName,lastName:e.lastName,email:e.email},a={gender:V,profession:e.profession,dateOfBirth:R,idProofType:e.idProofType,idProofNumber:e.idProofNumber,idProofFront:e.idProofFront,idProofBack:e.idProofBack};pe((0,N.A)("LOADING_PROFILE")),pe((0,v.ck)((0,r.Z)((0,r.Z)((0,r.Z)({},a),n),{},{profileCroppedImageFile:ee,frontCroppedImageFile:ne,backCroppedImageFile:oe,isMyBooking:k,isRegistrationForBooking:d,bookingId:i}),(function(){return d?F&&F():xe(X?w.Z.EXPLORE:w.Z.PERSONAL_INFO)}))),t.resetForm()},children:function(e){var t=e.errors,i=e.isValid,n=e.touched,c=(e.dirty,e.values),d=e.setValues,g=e.handleSubmit;return(0,U.jsxs)(f.l0,{className:"data-form",onSubmit:g,style:{width:"90%"},children:[(0,U.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",margin:"0 0 14px 0"},children:[(0,U.jsx)("label",{className:"label",children:"Upload Your Picture"}),(0,U.jsx)("label",{className:"app__info-sublabel label",children:"Your face should be clearly visible"})]}),(0,U.jsx)(a.Z,{display:"flex",justifyContent:"center",marginY:{xl:"1.875rem",md:"1.875rem",sm:"1.25rem",xs:"1.25rem"},children:(0,U.jsx)(H,{borderRadius:"50%",aspectRatio:1,required:!1,height:"173px",width:"173px",background:"#F3F1FF",border:"1px dashed #8F7EF3",iconcolor:"#8F7EF3",setCroppedImageFile:te,initialImage:me.profileImage})}),(0,U.jsx)(a.Z,{height:14}),(0,U.jsxs)(a.Z,{display:{xl:"flex",md:"flex",sm:"flex",xs:"block"},children:[(0,U.jsxs)(a.Z,{className:"mb-2",width:{xs:"100%",xl:"50%",md:"50%",sm:"50%"},children:[(0,U.jsx)("label",{className:"label",children:"First Name :"}),(0,U.jsx)(f.gN,{className:"input-field",type:"text",name:"firstName",size:"lg",label:"Name",required:!0}),n.firstName&&t.firstName?(0,U.jsxs)("span",{className:"error-msg",children:["*",t.firstName]}):null]}),(0,U.jsx)(a.Z,{height:14,width:14}),(0,U.jsxs)(a.Z,{className:"mb-2",width:{xs:"100%",xl:"50%",md:"50%",sm:"50%"},children:[(0,U.jsx)("label",{className:"label",children:"Last Name :"}),(0,U.jsx)(f.gN,{className:"input-field",type:"text",name:"lastName",size:"lg",label:"Name",required:!0}),n.lastName&&t.lastName?(0,U.jsxs)("span",{className:"error-msg",children:["*",t.lastName]}):null]})]}),(0,U.jsx)(a.Z,{height:14}),(0,U.jsxs)(a.Z,{className:"mb-2",width:{xs:"100%",xl:"100%",md:"100%",sm:"100%"},children:[(0,U.jsx)("label",{className:"label",children:"Email Id :"}),(0,U.jsx)(f.gN,{className:"input-field",type:"email",name:"email",size:"lg",label:"Name",required:!0}),n.email&&t.email?(0,U.jsxs)("span",{className:"error-msg",children:["*",t.email]}):null]}),(0,U.jsx)(a.Z,{height:14}),(0,U.jsxs)(a.Z,{className:"app__item-container",children:[(0,U.jsx)("label",{className:"label",children:"Gender :"}),(0,U.jsx)(l.ZP,{container:!0,spacing:1.5,children:y.mb.map((function(e,t){return(0,U.jsx)(l.ZP,{onClick:function(){var e;e=t,T(!0),q(B===e?void 0:e),Y(y.mb[e].text),d((0,r.Z)((0,r.Z)({},c),{},{gender:y.mb[t].text}))},item:!0,children:(0,U.jsxs)(M,{style:{backgroundColor:B===t?"#DFDAFF":"",border:B===t?"0.5px solid #6053AE":""},children:[(0,U.jsx)("img",{style:{height:"1rem"},src:e.pic,alt:e.text}),(0,U.jsx)(a.Z,{children:e.text})]})},t)}))}),z&&void 0===B?(0,U.jsx)("span",{style:{marginTop:"0.625rem"},className:"error-msg",children:"* Select at least one"}):null]}),(0,U.jsx)(a.Z,{height:14}),(0,U.jsxs)(a.Z,{className:"mb-2",width:{xs:"100%",xl:"100%",md:"100%",sm:"100%"},children:[(0,U.jsx)("label",{className:"label",children:"Profession :"}),(0,U.jsx)(f.gN,{className:"input-field",type:"text",name:"profession",size:"lg",label:"Name",required:!0}),n.profession&&t.profession?(0,U.jsxs)("span",{className:"error-msg",children:["*",t.profession]}):null]}),(0,U.jsx)(a.Z,{height:14}),X&&(0,U.jsxs)(a.Z,{className:"mb-2",display:"flex",flexDirection:"column",children:[(0,U.jsx)("label",{className:"label",children:"Date of Birth :"}),(0,U.jsx)(x._,{dateAdapter:h.H,children:(0,U.jsx)(p.O,{inputFormat:"dd/MM/yyyy",value:R,className:"date_picker",onChange:function(e){var t=new Date(e.toString()).toJSON();E(new Date(t))},renderInput:function(e){return(0,U.jsx)(u.Z,(0,r.Z)({},e))}})}),(0,U.jsx)(a.Z,{height:14})]}),(0,U.jsxs)(a.Z,{className:"mb-2",width:"100%",children:[(0,U.jsx)(m.Z,{className:"label",children:"ID Type :"}),(0,U.jsx)(u.Z,{value:c.idProofType,onChange:function(e){return d((0,r.Z)((0,r.Z)({},c),{},{idProofType:e.target.value}))},name:"idProofType",id:"id-type-label",fullWidth:!0,sx:{paddingY:0},select:!0,children:["Aadhar","Passport","Driving License"].map((function(e){return(0,U.jsx)(o.Z,{value:e,style:{width:"100%"},children:e},e)}))})]}),(0,U.jsx)(a.Z,{height:14}),(0,U.jsxs)(a.Z,{className:"mb-2",width:"100%",children:[(0,U.jsx)("label",{className:"label",children:"ID Number :"}),(0,U.jsx)(f.gN,{className:"input-field",type:"text",name:"idProofNumber",size:"lg",label:"Name",required:!0}),n.idProofNumber&&t.idProofNumber?(0,U.jsxs)("span",{className:"error-msg",children:["*",t.idProofNumber]}):null]}),(0,U.jsx)(a.Z,{height:30}),(0,U.jsx)(m.Z,{fontSize:{xl:"1.125rem",md:"1.125rem",sm:"1rem",xs:"1rem"},color:"#000000",children:"Upload Govt. Verified Photo ID"}),(0,U.jsx)(m.Z,{fontSize:{xl:"1rem",md:"1rem",sm:"0.813rem",xs:"0.813rem"},fontWeight:"200",color:"#1A191E",children:"(Aadhar, Passport, Driver's License, Voter ID)"}),(0,U.jsx)(a.Z,{height:15}),(0,U.jsx)(l.ZP,{children:(0,U.jsx)(a.Z,{display:"flex",height:"100%",children:(0,U.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(l.ZP,{item:!0,xs:6,children:(0,U.jsxs)(a.Z,{display:"flex",flexDirection:"column",gap:{md:"inherit",xs:"15px"},justifyContent:"space-between",width:"100%",height:"100%",children:[(0,U.jsx)(H,{required:!0,height:"10rem",width:"100%",aspectRatio:16/9,contWidth:"100%",background:"#F3F1FF",border:"0.5px dashed #8F7EF3",iconcolor:"#8F7EF3",setCroppedImageFile:ae,initialImage:me.idProofFront}),(0,U.jsx)(a.Z,{className:"pic-label",textAlign:"center",position:"relative",top:"10px",children:"Front Side"})]})}),(0,U.jsx)(l.ZP,{item:!0,xs:6,children:(0,U.jsxs)(a.Z,{flexDirection:"column",display:"flex",gap:{md:"inherit",xs:"15px"},justifyContent:"space-between",width:"100%",height:"100%",children:[(0,U.jsx)(H,{required:!0,contWidth:"100%",height:"10rem",width:"100%",aspectRatio:16/9,background:"#FCFBF4",border:"0.5px dashed #AD6800",iconcolor:"#AD6800",setCroppedImageFile:ce,initialImage:me.idProofBack}),(0,U.jsx)(a.Z,{className:"pic-label",textAlign:"center",position:"relative",top:"10px",children:"Back Side"})]})})]})})}),(0,U.jsx)(a.Z,{height:30}),(0,U.jsx)(a.Z,{style:{width:"100%",textAlign:"center",display:"flex",justifyContent:"flex-end",flexDirection:"row-reverse"},children:(0,U.jsx)(s.Z,{disabled:!i||z&&void 0===B,type:"submit",variant:"contained",sx:{background:"#8F7EF3",width:"100%",textTransform:"none"},children:S?"Loading...":X?"Proceed":"Save"})}),(0,U.jsx)(a.Z,{height:15})]})}})}}}]);
//# sourceMappingURL=2338.a6844edf.chunk.js.map